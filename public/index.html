<!DOCTYPE html>
<html>
<head>
  <title>Teams and Athletes</title>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const teamForm = document.getElementById('teamForm');
      const athletesButton = document.getElementById('fetchAthletes');
      const teamsContainer = document.getElementById('teamsContainer');
      const athletesContainer = document.getElementById('athletesContainer');

      teamForm.addEventListener('submit', async function(event) {
        event.preventDefault();

        const sport = document.getElementById('sport').value;
        const country = document.getElementById('country').value || 'usa';

        try {
          const response = await fetch(`https://us-central1-olympics-c5b48.cloudfunctions.net/api/getTeams?sport=${sport}&country=${country}`);
          const teams = await response.json();

          displayTeams(teams);
        } catch (error) {
          console.error('Error fetching teams:', error);
        }
      });

      athletesButton.addEventListener('click', async function() {
        const country = document.getElementById('country').value || 'usa';

        try {
          const response = await fetch(`https://us-central1-olympics-c5b48.cloudfunctions.net/api/getAllAthletes?country=${country}`);
          const athletes = await response.json();

          displayAthletes(athletes);
        } catch (error) {
          console.error('Error fetching athletes:', error);
        }
      });

      function displayTeams(teams) {
        teamsContainer.innerHTML = '';
        if (teams.length === 0) {
          teamsContainer.innerHTML = '<p>No teams found.</p>';
          return;
        }

        const ul = document.createElement('ul');
        teams.forEach(team => {
          const li = document.createElement('li');
          li.textContent = `Team ID: ${team.id}, Data: ${JSON.stringify(team.data)}`;
          ul.appendChild(li);
        });

        teamsContainer.appendChild(ul);
      }

      function displayAthletes(athletes) {
        athletesContainer.innerHTML = '';
        if (athletes.length === 0) {
          athletesContainer.innerHTML = '<p>No athletes found.</p>';
          return;
        }

        const ul = document.createElement('ul');
        athletes.forEach(athlete => {
          const li = document.createElement('li');
          li.textContent = `Athlete ID: ${athlete.id}, Name: ${athlete.name}`;
          ul.appendChild(li);
        });

        athletesContainer.appendChild(ul);
      }
    });
  </script>
</head>
<body>
  <h1>Olympics Teams and Athletes</h1>

  <form id="teamForm">
    <label for="sport">Sport:</label>
    <input type="text" id="sport" name="sport" required>
    <label for="country">Country:</label>
    <input type="text" id="country" name="country" placeholder="usa">
    <button type="submit">Get Teams</button>
  </form>

  <div id="teamsContainer"></div>

  <button id="fetchAthletes">Get All Athletes</button>
  <div id="athletesContainer"></div>
</body>
</html>
